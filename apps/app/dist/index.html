<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MagicCam</title>
  <script type="module" crossorigin src="./assets/main-DxfTrkBn.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/main-Do1TkIYD.css">
</head>
<body>
    <div id="app">
        <div class="start-screen" id="start-screen">
            <h1>‚ú® Magic Kamera ‚ú®</h1>
            <p class="start-text">Scroll to select style or Add style with Magic Button</p>
            <button id="start-button" class="start-button">Start Camera</button>
        </div>
        <div class="camera-container" id="camera-container" style="display: none;">
            <video id="video" autoplay playsinline muted></video>
            <img id="captured-image" style="display: none;" alt="Captured photo">
            <canvas id="canvas" style="display: none;"></canvas>
        </div>
        <p id="status" class="status-text" style="display: none;">Initializing camera...</p>
        <button id="reset-button" class="reset-button" style="display: none;">New Photo</button>
        <button id="camera-button" class="camera-button" title="Switch Camera" style="display: none;">üì∑</button>
        <button id="random-toggle" class="random-toggle" title="Toggle Random Mode" style="display: none;">üé≤</button>
        <button id="menu-button" class="menu-button" title="Menu" style="display: none;">‚ò∞</button>
        <button id="burst-toggle" class="burst-toggle" title="Toggle Burst Mode" style="display: none;">
            <span class="burst-icon">üì∏‚ö°</span>
        </button>
        <button id="gallery-button" class="gallery-button" title="Gallery" style="display: none;">üñºÔ∏è</button>
        
        <!-- Style Name Reveal -->
        <div id="style-reveal" class="style-reveal" style="display: none;">
            <span id="style-reveal-text"></span>
        </div>
        
        <!-- Connection Status -->
        <div id="connection-status" class="connection-status online" style="display: none;">
            <span id="connection-text">Online</span>
        </div>
        
        <!-- Queue Status -->
        <div id="queue-status" class="queue-status" style="display: none;">
            <span id="queue-count">0</span> queued
        </div>
        
        <!-- Sync Button -->
        <button id="sync-button" class="sync-button" title="Sync Queued Photos" style="display: none;">
            üîÑ Sync (<span id="sync-count">0</span>)
        </button>
        
        <!-- Unified Menu -->
        <div id="unified-menu" class="styles-menu" style="display: none;">
            <div class="styles-menu-content">
                <div class="styles-menu-header">
                    <h2>Menu</h2>
                    <button id="close-menu" class="close-button">√ó</button>
                </div>
                
                <!-- Resolution Section -->
                <div class="menu-section">
                    <button id="resolution-menu-button" class="menu-section-button">
                        <span class="menu-section-title">Resolution</span>
                        <span id="current-resolution-display" class="menu-section-value">640x480</span>
                        <span class="menu-section-arrow">‚Ä∫</span>
                    </button>
                </div>
                
                <!-- Burst Settings Section -->
                <div class="menu-section">
                    <button id="burst-menu-button" class="menu-section-button">
                        <span class="menu-section-title">Burst Settings</span>
                        <span id="current-burst-display" class="menu-section-value">5 photos, Medium</span>
                        <span class="menu-section-arrow">‚Ä∫</span>
                    </button>
                </div>
                
                <!-- Styles Section -->
                <div class="menu-section">
                    <h3 class="menu-section-title">AI Styles</h3>
                    <input type="text" id="style-filter" class="style-filter" placeholder="Filter styles...">
                    <div id="menu-styles-list" class="menu-list">
                        <!-- Styles will be dynamically added here -->
                    </div>
                    <button id="add-style-menu" class="add-style-button">+ Add New Style</button>
                </div>
            </div>
        </div>
        
        <!-- Resolution Submenu -->
        <div id="resolution-submenu" class="submenu" style="display: none;">
            <div class="submenu-content">
                <div class="submenu-header">
                    <button id="resolution-back" class="back-button">‚Äπ Back</button>
                    <h3>Resolution</h3>
                </div>
                <div id="resolution-list" class="submenu-list">
                    <!-- Resolution options will be dynamically added here -->
                </div>
            </div>
        </div>
        
        <!-- Burst Submenu -->
        <div id="burst-submenu" class="submenu" style="display: none;">
            <div class="submenu-content">
                <div class="submenu-header">
                    <button id="burst-back" class="back-button">‚Äπ Back</button>
                    <h3>Burst Settings</h3>
                </div>
                <div class="submenu-list">
                    <div class="burst-setting-item">
                        <label for="burst-count-slider">Photos per burst: <span id="burst-count-value">5</span></label>
                        <input type="range" id="burst-count-slider" min="2" max="10" value="5" step="1">
                    </div>
                    <div class="burst-setting-item">
                        <label for="burst-speed-slider">Burst speed: <span id="burst-speed-value">Medium</span></label>
                        <input type="range" id="burst-speed-slider" min="1" max="3" value="2" step="1">
                        <div class="burst-speed-labels">
                            <span>Slow</span>
                            <span>Medium</span>
                            <span>Fast</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Style Editor Modal -->
        <div id="style-editor" class="style-editor" style="display: none;">
            <div class="style-editor-content">
                <div class="style-editor-header">
                    <h3 id="editor-title">Edit Style</h3>
                    <button id="close-editor" class="close-button">√ó</button>
                </div>
                <div class="style-editor-body">
                    <input type="text" id="style-name" class="style-input" placeholder="Style name" maxlength="20">
                    <textarea id="style-message" class="style-textarea" placeholder="AI prompt for this style" maxlength="200"></textarea>
                    <div class="editor-buttons">
                        <button id="save-style" class="save-button">Save</button>
                        <button id="delete-style" class="delete-button" style="display: none;">Delete</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Gallery Modal -->
        <div id="gallery-modal" class="gallery-modal" style="display: none;">
            <div class="gallery-content">
                <div class="gallery-header">
                    <h3>Gallery</h3>
                    <button id="close-gallery" class="close-button">√ó</button>
                </div>
                <div class="gallery-scroll-container">
                    <div class="gallery-controls">
                        <div class="date-filter-buttons">
                            <button id="gallery-start-date-btn" class="date-filter-button">
                                <span class="date-button-text">Start</span>
                            </button>
                            <button id="gallery-end-date-btn" class="date-filter-button">
                                <span class="date-button-text">End</span>
                            </button>
                        </div>
                        <select id="gallery-sort-order" class="gallery-filter-select">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                        </select>
                    </div>
                    <div id="gallery-grid" class="gallery-grid">
                        <!-- Gallery images will be dynamically added here -->
                    </div>
                    <div id="gallery-pagination" class="gallery-pagination" style="display: none;">
                        <button id="prev-page" class="pagination-button">‚Äπ Prev</button>
                        <span id="page-info" class="page-info">Page 1 of 1</span>
                        <button id="next-page" class="pagination-button">Next ‚Ä∫</button>
                    </div>
                </div>
            </div>
            <input type="date" id="gallery-start-date" class="hidden-date-input">
            <input type="date" id="gallery-end-date" class="hidden-date-input">
        </div>
        
        <!-- Image Viewer Modal -->
        <div id="image-viewer" class="image-viewer" style="display: none;">
            <div class="image-viewer-content">
                <button id="delete-viewer-image" class="viewer-delete-button">üóëÔ∏è</button>
                <button id="close-viewer" class="viewer-close-button">√ó</button>
                <div class="image-viewer-container">
                    <img id="viewer-image" class="viewer-image" alt="Viewing image">
                </div>
                <div class="viewer-controls">
                    <div class="viewer-prompt-section">
                        <input type="text" id="viewer-prompt" class="viewer-prompt-input" placeholder="Enter prompt or load preset...">
                        <button id="load-preset-button" class="load-preset-button">Load Preset</button>
                    </div>
                    <button id="magic-button" class="magic-button">‚ú® Magic</button>
                </div>
            </div>
        </div>
        
        <!-- Preset Selector Modal -->
        <div id="preset-selector" class="preset-selector" style="display: none;">
            <div class="preset-selector-content">
                <div class="preset-selector-header">
                    <h3>Select Preset</h3>
                    <button id="close-preset-selector" class="close-button">√ó</button>
                </div>
                <input type="text" id="preset-filter" class="style-filter" placeholder="Filter presets...">
                <div id="preset-list" class="preset-list">
                    <!-- Presets will be dynamically added here -->
                </div>
            </div>
        </div>
        
        <!-- Queue Manager Modal -->
        <div id="queue-manager" class="queue-manager" style="display: none;">
            <div class="queue-manager-content">
                <div class="queue-manager-header">
                    <h3>Queued Photos</h3>
                    <button id="close-queue-manager" class="close-button">√ó</button>
                </div>
                <div id="queue-list" class="queue-list">
                    <!-- Queued items will be dynamically added here -->
                </div>
                <div class="queue-actions">
                    <button id="sync-all" class="sync-button">Sync All</button>
                    <button id="clear-queue" class="delete-button">Clear Queue</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
